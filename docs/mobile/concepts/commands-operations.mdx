---
id: commands-operations
title: Commands and Operations
---
import UseCaseCard from "../../../src/components/UseCaseCard/UseCaseCard";
import UseCaseContainer from "../../../src/components/UseCaseContainer/UseCaseContainer";
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::note Before learning about commands and operations...
Check out the [Key Concepts](/docs/mobile/concepts/key-concepts).
:::

TODO - better name for command/operation. Behaviour?


Commands and Operations are runnable, independant units of work within GXM. Using the SDK, it's possible to define custom commands and operations for use throughout the application. TODO - how do we show people what is available? Commands are units of work which may take an input but do not produce an output, and operations differ because they produce output. Commands and Operations are grouped by namespace, for example

TODO - how deep here... naming conventions? or should that be in the section about adding a command/operation

```
auth.sign-in
auth.sign-out
edit.add-feature
edit.delete-features
```

Commands and Operations are most commonly used to configure the behaviour of [Components](./components). For example, here's configuration of a Feature Details component with various commands and operations.

```json
{
  "$type": "feature-details",
  "id": "feature-details",
  "featureActions": "item://menu/feature-actions",
  "onFeatureShow": "highlights.add-focus",
  "onFeatureHide": "highlights.remove-focus",
  "onFeatureDelete": [
    "highlights.remove-focus",
    "highlights.remove",
    "edit.delete-features",
    "results.hide-details",
    "results.remove"
  ]
}
```

Configuration properties that accept a command/operation can take a single operation (such as with onFeatureHide) or they can take multiple commands/operations (such as with onFeatureDelete). In this example, when a feature is deleted the focus and highlights are removed, the feature is deleted from the layer, the results details are hidden, and the feature is removed from the results list. Since these commands/operations are running from the **context** of a Feature Details component, the first command/operation receives the relevant feature as it's input. If the commands/operations and chained, the next behaviour in line will receieve one of two possible inputs.

1. If the previous behaviour was a command (which doesn't produce output), then the original input is passed on to the next behaviour.
2. If the previous behaviour was an operation (which produces an output), then the output of that operation is passed onto the next behaviour.

In this way, you can run multiple commands in a row that receive a feature as input, as seen in the `onFeatureDelete` command chain in the example. 

### Passing Named Arguments

If you chose, you can overide the default arguments passed into a command or operation by provide an `arguments` property.

```json
{
  "$type": "menu",
  "id": "iwtm",
  "items": [
    {
      "title": "Rotate by 45 Degrees",
      "isEnabled": true,
      "iconId": "sync",
      "action": {
        "name": "map.rotate-by",
        "arguments": {
          "rotation": 45
        }
      }
    }
  ]
}
```

This will override the default arugment passing/chaining behaviour for that command/operation. Each command has typed arguments that can be browsed in the API. (TODO - this may not be true for MVP). For example, `map.rotate-by` takes a object of type [`MapRotateArgs`](TODO link to api), which has the property `Rotation` of type `double`. In the App Config, the `Rotation` property can be camelCase'd instead of PascalCased.  

### I Want To Menu Example

TODO - another example with a menu
TODO - Fix this broken example
Multiple commands, with one being an operation then a command, full layout, app json example

<Tabs
  defaultValue="app"
  values={[
    { label: 'app.json', value: 'app', },
    { label: 'layout.xml', value: 'layout', },
    { label: 'User Interface', value: 'ui', }
  ]
}>
  <TabItem value="app">

  ```json
  {
    "name": "Commands/Operations Configuration Sample",
    "settings": {
      "defaultVisibility": "true",
      "applicationName": "Commands/Operations Configuration Sample",
      "defaultWidth": 800,
      "defaultHeight": 600
    },
    "items": [
      {
        "$type": "layout",
        "id": "desktop-layout",
        "url": "resource://layout.xml",
        "tags": [ "mobile", "large" ]
      },
      {
        "$type": "menu",
        "id": "iwtm",
        "items": [
          {
            "title": "Refresh App",
            "isEnabled": true,
            "iconId": "sync",
            "action": "app.refresh"
          },
          {
            "title": "Select and Identify",
            "isEnabled": true,
            "iconId": "identify",
            "action": [
              "map.get-geometry-from-selector",
              "tasks.identify"
            ]
          }
        ]
      }
    ]
  }
  ```

  </TabItem>
  <TabItem value="layout">

  ```
  <?xml version="1.0" encoding="utf-8" ?>
  <layout
      xmlns="https://geocortex.com/layout/v1"
      xmlns:gxm="https://geocortex.com/layout/mobile/v1"
      xmlns:ui-test="https://geocortex.com/layout/mobile/v1/ui-test"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="https://geocortex.com/layout/v1 ../../ViewerFramework/layout/layout-mobile.xsd
        https://geocortex.com/layout/mobile/v1/ui-test ./layout-ui-test.xsd">
    <gxm:taskbar id="taskbar" orientation="vertical">
      <!-- Taskbar main content -->
      <map id="page1-map1" slot="main">
        <stack margin="0.8" slot="top-right" halign="end">
          <iwtm config="iwtm" id="IWTM"> 
            <user slot="bottom"/>
          </iwtm>
        </stack>
      </map>
    </gxm:taskbar>
  </layout>
  ```

  </TabItem>
  <TabItem value="ui">
    <img src="/img/iwtm-config-example.png" />
  </TabItem>
</Tabs>

TODO - commands and operations in layout.... should I even?

<UseCaseContainer>
    <UseCaseCard
        title="Commands and Operations Schema"
        description="Check out the available commands and operations."
        link="/docs/mobile/api/commands-operations"
    />
    <UseCaseCard
        title="Configure Commands and Operations"
        description="Change built in behaviour or add new behaviour using App Configuration and Layout."
        link="/docs/mobile/concepts/app-config"
    />
    <UseCaseCard
        title="Build your own Commands and Operations"
        description="Use the SDK to implement custom Commands and Operations."
        link="/docs/mobile/use-cases/custom-command-operation"
    />
</UseCaseContainer>
